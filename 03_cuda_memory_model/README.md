# cuda内存模型

## 流多处理器

![流多处理器01](./images/流多处理器01.png)
![流多处理器02](./images/流多处理器02.png)
线程束中的线程是并行的

## 线程模型与物理模型结构

![线程模型与物理模型结构](./images/线程模型与物理模型.png)

## 线程束
![线程束01](./images/线程束01.png)
![线程束02](./images/线程束02.png)

## 内存结构层次
> 查看gpu内存使用情况
> nvcc --resource-usage hello.cu -o hello -arch=sm_61  sm_61(计算能力)

![内存结构层次01](./images/内存结构层次01.png)

## cuda内存模型
![cuda内存模型01](./images/cuda内存模型01.png)
![cuda内存模型02](./images/cuda内存模型02.png)

## 寄存器
![寄存器01](./images/寄存器01.png)
![寄存器02](./images/寄存器02.png)
![寄存器溢出](./images/寄存器溢出01.png)

## 本地内存
![本地内存01](./images/本地内存01.png)
![本地内存02](./images/本地内存02.png)

## 共享内存
![共享内存01](./images/共享内存01.png)
![共享内存02](./images/共享内存02.png)
![共享内存03](./images/共享内存03.png)
![静态共享内存](./images/静态共享内存01.png)
![共享内存与一级缓存划分](./images/共享内存与一级缓存划分.png)

1. 在定义共享内存的时候，一般需要定义长度等于线程块大小的数组
2. 核函数里面的第三个参数就是指定的动态共享内存的大小`kernel<<<grid, block, 32>>>();`

## 全局内存
![全局内存01](./images/全局内存01.png)
![全局内存02](./images/全局内存02.png)

1. 静态全局内存的数量是在编译期就确定下来的，需要在所有的主机和设备外面进行定义声明。
2. 在核函数里面可以直接对静态全局内存进行访问。
3. 主机函数不能直接访问静态全局变量，通过cudaMemcpyToSymbol, cudaMemcpyFromSymbol进行通信

## 常量内存
![常量内存01](./images/常量内存01.png)
![常量内存02](./images/常量内存02.png)

1. 常量内存必须定义在核函数/主机函数之外
2. `__global__ void kernel(int N)`  // 这里的N就是存放在常量内存中的


